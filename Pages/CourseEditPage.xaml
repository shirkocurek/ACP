<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
  x:Class="c971_mobile_application_development_using_c_sharp.Pages.CourseEditPage"
  xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
  xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
  xmlns:controls="clr-namespace:c971_mobile_application_development_using_c_sharp.Controls"
  Title="{Binding PageTitle}">
  <Shell.TabBarIsVisible>false</Shell.TabBarIsVisible>

  <Grid RowDefinitions="*,Auto"
      Padding="{OnPlatform iOS='0,0,0,12', Android='0'}">

    <ScrollView Grid.Row="0">
      <VerticalStackLayout Padding="16"
          Spacing="12">

        <Entry Placeholder="Course Title (required)"
               Text="{Binding Course.Title, Mode=TwoWay}"/>

        <!-- Honeypot: visible to bots, invisible to humans & screen readers -->
        <Grid
          Opacity="0"
          HeightRequest="1"
          WidthRequest="1"
          IsVisible="True"
          InputTransparent="False"
          AutomationProperties.IsInAccessibleTree="False">
          <Entry
            Placeholder="Website"
            Text="{Binding Honeypot, Mode=TwoWay}"
            ReturnType="Done"/>
        </Grid>

        <Grid ColumnDefinitions="*,*"
            ColumnSpacing="12">
          <VerticalStackLayout>
            <Label Text="Start Date"/>
            <DatePicker Date="{Binding Course.StartDate}"/>
          </VerticalStackLayout>
          <VerticalStackLayout Grid.Column="1">
            <Label Text="End Date"/>
            <DatePicker Date="{Binding Course.EndDate}"/>
          </VerticalStackLayout>
        </Grid>

        <Frame Padding="12"
            HasShadow="True">
          <VerticalStackLayout Spacing="8">
            <Label Text="Course notifications"
                FontAttributes="Bold"/>

            <Grid ColumnDefinitions="Auto,*"
                ColumnSpacing="12">
              <Label Text="Alert on course start"
                  VerticalOptions="Center"/>
              <Switch Grid.Column="1"
                  IsToggled="{Binding Course.NotifyOnStart, Mode=TwoWay}"/>
            </Grid>

            <Grid ColumnDefinitions="Auto,*"
                ColumnSpacing="12">
              <Label Text="Alert on course end"
                  VerticalOptions="Center"/>
              <Switch Grid.Column="1"
                  IsToggled="{Binding Course.NotifyOnEnd, Mode=TwoWay}"/>
            </Grid>
          </VerticalStackLayout>
        </Frame>


        <VerticalStackLayout>
          <Label Text="Status"/>
          <Picker ItemsSource="{Binding StatusOptions}"
                  SelectedItem="{Binding Course.Status, Mode=TwoWay}"/>
        </VerticalStackLayout>

        <Frame Padding="12">
          <VerticalStackLayout Spacing="6">
            <Label Text="Instructor"
                FontAttributes="Bold"/>
            <Entry Placeholder="Name (required)"
                Text="{Binding Course.InstructorName,  Mode=TwoWay}"/>
            <Entry Placeholder="Phone (required)"
                Text="{Binding Course.InstructorPhone, Mode=TwoWay}"
                Keyboard="Telephone"/>
            <Entry Placeholder="Email (required)"
                Text="{Binding Course.InstructorEmail, Mode=TwoWay}"
                Keyboard="Email"/>
          </VerticalStackLayout>
        </Frame>

        <Label Text="Notes (optional)"/>
        <Editor AutoSize="TextChanges"
            Text="{Binding Course.Notes, Mode=TwoWay}"
            HeightRequest="100"/>

        <Grid ColumnDefinitions="*,*"
            ColumnSpacing="12"
            Margin="0,8,0,0">
          <Button Text="Cancel"
              Clicked="OnCancel"/>
          <Button Grid.Column="1"
              Text="{Binding SaveText}"
              Command="{Binding SaveCommand}"/>
        </Grid>

        <Button Text="Delete"
            TextColor="Red"
            IsVisible="{Binding ShowDelete}"
            Command="{Binding DeleteCommand}"/>
      </VerticalStackLayout>
    </ScrollView>

    <controls:BottomNavBar Grid.Row="1"/>
  </Grid>
</ContentPage>
