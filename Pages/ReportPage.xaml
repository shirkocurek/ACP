<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="c971_mobile_application_development_using_c_sharp.Pages.ReportPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Report">

    <VerticalStackLayout Padding="16"
            Spacing="12">

        <Label Text="{Binding ReportTitle}"
                FontAttributes="Bold"
                FontSize="20"/>
        <Label Text="{Binding GeneratedAt}"
                FontSize="12"
                TextColor="#666"/>

        <Grid ColumnDefinitions="*,*"
                ColumnSpacing="12">
            <VerticalStackLayout>
                <Label Text="From"
                        FontSize="12"/>
                <DatePicker Date="{Binding FromDate}"/>
            </VerticalStackLayout>
            <VerticalStackLayout Grid.Column="1">
                <Label Text="To"
                        FontSize="12"/>
                <DatePicker Date="{Binding ToDate}"/>
            </VerticalStackLayout>
        </Grid>

 
        <HorizontalStackLayout Spacing="12"
                Padding="12,8">
            <Button Text="Generate New Report"
                    Command="{Binding LoadCommand}"/>
            <Button Text="Export CSV"
                    Command="{Binding ExportCsvCommand}"/>
        </HorizontalStackLayout>


        <Grid RowDefinitions="Auto, *"
                ColumnDefinitions="*">

            <Grid Padding="8"
                    BackgroundColor="{AppThemeBinding Light=#F1F3F5, Dark=#222}">
                <Grid ColumnDefinitions="80,*,*,120,120,100">
                    <Label Text="Type"
                            FontAttributes="Bold"/>
                    <Label Grid.Column="1"
                            Text="Title"
                            FontAttributes="Bold"/>
                    <Label Grid.Column="2"
                            Text="Parent"
                            FontAttributes="Bold"/>
                    <Label Grid.Column="3"
                            Text="Start"
                            FontAttributes="Bold"/>
                    <Label Grid.Column="4"
                            Text="End"
                            FontAttributes="Bold"/>
                    <Label Grid.Column="5"
                            Text="Status"
                            FontAttributes="Bold"/>
                </Grid>
            </Grid>

            <CollectionView Grid.Row="1"
                    ItemsSource="{Binding Rows}"
                    SelectionMode="None">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Grid Padding="8"
                                ColumnDefinitions="80,*,*,120,120,100">
                            <Label Text="{Binding Kind}"/>
                            <Label Grid.Column="1"
                                    Text="{Binding Title}"/>
                            <Label Grid.Column="2"
                                    Text="{Binding Parent}"/>
                            <Label Grid.Column="3"
                                    Text="{Binding StartDate, StringFormat='{0:d}'}"/>
                            <Label Grid.Column="4"
                                    Text="{Binding EndDate,   StringFormat='{0:d}'}"/>
                            <Label Grid.Column="5"
                                    Text="{Binding Status}"/>
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>

    </VerticalStackLayout>
</ContentPage>
